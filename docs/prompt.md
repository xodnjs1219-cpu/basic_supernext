````markdown
### 1. 프로젝트 단위 기획

서비스의 타겟유저, 핵심기능, 페이지 구성 등을 구체화하는 단계입니다. Vooster AI와 같은 서비스의 도움을 받으면 좋습니다.

이번 실습에서는 간단한 PRD만 작성해보겠습니다.

```bash
다음 요구사항에 대한 구체적인 PRD를 작성하라.
다음 내용을 반드시 포함하라.

- 제품 개요
- stakeholders
- 포함 페이지
- 사용자 여정: 타겟 유저 segment, 페이지를 반드시 명시
- IA: tree 형태 시각화

`/docs/prd.md` 경로에 생성하라.

---

(여기에 요구사항을 입력)

```

### 2. 유저플로우

같은 채팅세션에서 이어서 작업하겠습니다.

다음과 같이 입력하세요.

```bash
해당 요구사항을 구체적으로 기획할 것이다. 이에 대한 기능단위 유저플로우를 설계하라.
각 유저플로우는 다음 단계로 구성된다.
1. 입력: 사용자가 제공하는 모든 UI 입력 및 상호작용
2. 처리: 시스템 내부 로직을 단계별로 기술
3. 출력: 사용자로의 피드백 및 사이드이펙트
반드시 다음 규칙을 준수하라.
- 발생할 수 있는 엣지케이스를 대응하라.
- 구체적인 문구 등은 포함하지 않는다.
한번에 하나씩 유저플로우를 반환하고, 이해한 것이 맞는지 내게 되물어라.
```

반환된 유저플로우를 모두 검토한 뒤,

아래 프롬프트를 입력하여 파일로 생성하세요.

```bash
지금까지 정리한 유저플로우를 종합하여 최종 완성본으로 응답하라.
`/docs/userflow.md` 경로에 생성하라.
```

### 3. 데이터플로우, 스키마

유저플로우가 완료됐다면,

다음으로 데이터플로우와 스키마를 구상하겠습니다.

같은 채팅세션에서 이어서 입력합니다.

```jsx
확정된 유저플로우를 기반으로, 이를 구현하기위한 최소 스펙의 데이터베이스 스키마 구상하고,
데이터베이스 관점의 데이터플로우 작성하라.
- 반드시 유저플로우에 명시적으로 포함된 데이터만 포함한다.
- 먼저 간략한 데이터플로우를 응답하고, 이후 구체적인 데이터베이스 스키마를 응답하라.
- PostgreSQL을 사용한다.
```

반환된 데이터플로우가 의도와 다른 경우,

다음과 같이 프롬프트하여 수정하자.

```markdown
데이터플로우를 다음과 같이 변경한 뒤, 수정된 데이터플로우와 스키마를 최종 완성본으로 다시 응답하라.

---

(여기에 수정 필요 사항을 입력한다)
```

모든 수정이 끝났다면,

Agent 모드로 아래 프롬프트를 입력하세요.

```bash
지금까지 정리한 데이터플로우, 스키마를 종합하여 최종 완성본으로 응답하라.
`/docs/database.md` 경로에 생성하라.
또, 이를 데이터베이스에 반영하기위한 migration sql을 `/supabase/migrations` 경로에 생성하라.
```

### 4. 유스케이스 작성

이제 기능 구현을 시작합시다. 다음 프롬프트를 입력해, 구체적인 유스케이스 문서를 작성합니다.

(N에 숫자를 입력해주세요.)

```bash
`/docs/userflow.md`의 {N}번 기능에 대한 상세 유스케이스를 작성하고, `/docs/00N/spec.md` 경로에 저장하세요.
간결하게, 검토하기 쉽게 작성하세요. 다음 내용을 포함하세요.

- Primary Actor
- Precondition (사용자 관점에서만)
- Trigger
- Main Scenario
- Edge Cases: 발생할 수 있는 오류 및 처리를 간략하게 언급
- Business Rules

PlantUML 문법을 사용한 Sequence Diagram도 작성하세요.
User / FE / BE / Database로 나누면 됩니다.
구분선 같은 마킹없이 PlantUML 표준 문법을 따르도록 작성하세요.
```

완성된 유스케이스 문서를 검토합니다. Sequence Diagram은 Previewer로 가시화할 수 있습니다.

[PlantUML Previewer](https://seesleestak.github.io/plantuml-previewer-react/)

기획이 확정되었다면 다음 단계로 진행합니다.

- 질문 답변
    
    주로 어떤 UML을 사용하시나요?
    지금 시도하고 있는 UML은
    
    전체 프로그램에 대해 러프한 설명, internal/external communication을 하기 위해 상태 다이어그램
    특정 함수에 대해 설명하기 위한 플로우 다이어그램
    전반적인 시퀀스 및 특정 함수를 위한 시퀀스 다이어그램
    폴더구조/변수/함수명을 지정하기 위한 클래스 다이어그램
    ICD를 알려주기 위한 패킷 다이어그램
    을 작성하고 있습니다.
    
    👉
    
    - Userflow 설명용 UML
    - 특정 함수에 대한 디테일한 설명
        - pseudo code 작성

### 5. 구현 계획 도출 및 실행

모듈 단위로 구체적인 구현 계획을 작성합니다.

```bash
@spec.md참조

위 유스케이스 문서의 기능을 구현하기위한 최소한의 모듈화 설계 진행하세요.

반드시 다음 순서를 따라야한다.
1. 유스케이스 문서 내용을 통해 자세한 요구사항을 파악한다.
2. 코드베이스에서 관련 파일들을 탐색하여 이미 구현된 기능, convention, guideline 등을 파악한다.
3. 구현해야할 모듈 및 작업위치를 설계한다. AGENTS.md의 코드베이스 구조를 반드시 지킨다. shared로 분리가능한 공통 모듈 및 제네릭을 고려한다.
완성된 설계를 다음과 같이 구성하여 유스케이스 문서와 같은 경로에 `plan.md`로 저장한다.
- 개요: 모듈 이름, 위치, 간략한 설명을 포함한 목록
- Diagram: mermaid 문법을 사용하여 모듈간 관계를 시각화
- Implementation Plan: 각 모듈의 구체적인 구현 계획. presentation의 경우 qa sheet를, business logic의 경우 unit test를 포함.

```

오버 엔지니어링된 경우 적절히 제거합니다.

```jsx
너무 많은 모듈이 포함되어, 오버 엔지니어링 상태다. 단순화하여 다시 최종본을 응답하라.
```

모든 설계가 완료되었다면, 에이전트에 다음과 같이 명령합니다.

```bash
@prd.md참조
@userflow.md참조
@database.md참조

@spec.md참조
@plan.md참조

---

참조된 문서들을 기반으로 {기능 이름} 기능 구현하세요.
- 모두 구현할때까지 멈추지말고 진행하세요.
- type, lint, build에러가 없음을 보장하세요.
- 절대 하드코딩된 값을 사용하지마세요.
```

